<h1>About</h1>
<p>網站: <a href="https://mdecd2023.github.io/football-apj1">https://mdecd2023.github.io/football-apj1</a><span><span> </span></span></p>
<p><span>倉儲:<span> </span></span><a href="https://github.com/mdecd2023/football-apj1">https://github.com/mdecd2023/football-apj1</a></p>
<p><span>討論區: </span><a href="https://github.com/mdecd2023/football-apj1/discussions">https://github.com/mdecd2023/football-apj1/discussions</a></p>
<h1>足球場景</h1>
<p>bubbleRob1 與 bubbleRob2 分別透過 19997 與 19998 埠號交由雙方的 Python remoteAPI 進行控制</p>
<p>場景串流埠號: 23020</p>
<p>假設: 19997 與 bubbleRob1 的控制在一台 Windows 10 電腦上, 而 19998 則交由另外一台電腦控制.</p>
<h1>評分</h1>
<p><a href="https://gist.githubusercontent.com/mdecycu/92a2f2d8389aeeca986ecb9f7a901180/raw/a9fcd1d1f33d892c8a1f30102262a3269475741f/2a_w6-2_python_remote_api_result.txt">2a w6-2 Python remoteAPI 連線查驗結果.txt</a></p>
<p><a href="https://mde.tw/studlist/2023spring/2a.txt">2a 學號與 Githbu 帳號對應名單</a></p>
<p>還需要設法取得各組組員名單, 然後再換成學號</p>
<p>請各組在 pj1 分組網頁中, 以 w6 (H2) 作為頁面標題, 直接在頁面中, 列出完成連線的分組與未完成連線的分組組員學號. </p>
<p>預計採用 Brython 讀取上面兩個連結資料後, 再逐一利用迴圈進行比對</p>
<!-- 建立 Brython 環境 -->
<p id="brython_div"></p>
<script src="/static/brython.js"></script>
<script src="/static/brython_stdlib.js"></script>
<script>
window.onload=function(){
brython({debug:1, pythonpath:['/static/']});
}
</script>
<p id="output"></p>
<script type="text/python">
# 從 browser 模組導入 html 與 document
# html 用於建立 html 物件, 而 document 則可對應到網頁元件
from browser import html, document
import re
# api 練習傳送結果的 gist url
api_result_url = "https://gist.githubusercontent.com/mdecycu/92a2f2d8389aeeca986ecb9f7a901180/raw/a9fcd1d1f33d892c8a1f30102262a3269475741f/2a_w6-2_python_remote_api_result.txt"
# 從 studlist 倉儲取得的學號與帳號對應連結
stud_github_url = "https://mde.tw/studlist/2023spring/2a.txt"
api_result = open(api_result_url).read().split("\n")
output = document["output"]
group = []
for i in api_result:
    try:
        if "虛擬世界" not in i:
            num = re.findall('\d+', i )
            if num[0] != "":
                #output <= str(num[0])
                #output <= html.BR()
                group.append(int(num[0]))
    except:
        pass
    
stud_github = open(stud_github_url).read().split("\n")
for i in stud_github:
    output <= i
    output <= html.BR()
output <= "完成 remote API 連線的 2a 組別"
output <= html.BR()
output <= str(sorted(list(set(group))))
</script>
<h1>pj1</h1>
<h2>ag2</h2>
<p>2a-pj1ag2組員:41023146洪偉陞、41023148夏進源</p>
<p>pj1倉儲:<a href="https://github.com/mdecd2023/2a-pj1ag2">https://github.com/mdecd2023/2a-pj1ag2</a></p>
<p>pj1網頁:<a href="https://mdecd2023.github.io/2a-pj1ag2/content/index.html">https://mdecd2023.github.io/2a-pj1ag2/content/index.html</a></p>
<p>bubbleRob足球遊戲</p>
<p>1.先繪製球框(<a href="/downloads/ag2_downloads/ball frame.7z">ball frame.7z</a>)</p>
<p><img alt="" height="315" src="/downloads/ag2_downloads/2023-03-27.png" width="560"/></p>
<p>2.使用鍵盤控制<a href="/downloads/ag2_downloads/bubbleRob_lua.ttt">bubbleRob</a></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/MfkN-pduOq0" title="YouTube video player" width="560"></iframe></p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()  
    right_wheel= sim.getObjectHandle('joint1') 
    left_wheel= sim.getObjectHandle('joint2') 
    right_velocity=0 
    left_velocity=0
    speed=5
    sim.setJointTargetVelocity(right_wheel,0)
    sim.setJointTargetVelocity(left_wheel,0)
 
end
  
function sysCall_actuation()  
    message,auxiliaryData=sim.getSimulatorMessage() 
    while message~=-1 do
        if (message==sim.message_keypress) then
            
            if (auxiliaryData[1]==32) then

                right_velocity=0 
                left_velocity=0 
                sim.setJointMaxForce(right_wheel, 0) 
                sim.setJointMaxForce(left_wheel, 0) 
                break
            else
                sim.setJointMaxForce(right_wheel, 10) 
                sim.setJointMaxForce(left_wheel, 10)
            
            
                if (auxiliaryData[1]==2007) then -- up key
                    
                    sim.setJointTargetVelocity(right_wheel,speed)
                    sim.setJointTargetVelocity(left_wheel,speed)
                end
                if (auxiliaryData[1]==2008) then -- down key
                    
                    sim.setJointTargetVelocity(right_wheel,-speed/2)
                    sim.setJointTargetVelocity(left_wheel,-speed/2)
                    
                end
                if (auxiliaryData[1]==2009) then -- left key
                    sim.setJointTargetVelocity(right_wheel,speed)
                    sim.setJointTargetVelocity(left_wheel,speed/2)
                   
                end
                if (auxiliaryData[1]==2010) then -- right key
                    sim.setJointTargetVelocity(right_wheel,speed/2)
                    sim.setJointTargetVelocity(left_wheel,speed)
                    
                end

            end
        end
        message,auxiliaryData=sim.getSimulatorMessage()
    end
end</pre>
<p></p>
<p>3.加入球框感測器和記分板(<a href="/downloads/ag2_downloads/newbubbleRob2.ttt">newbubbleRob.ttt</a>)</p>
<p><img alt="" height="315" src="/downloads/ag2_downloads/scoreboard.png" width="560"/></p>
<p>感測器lua腳本</p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    score1 = 0
    
    sensor = sim.getObject('./sensor')
    xml = [[
        &lt;ui title="Scoreboard" closeable="false" resizable="false" style="plastique"&gt;
        &lt;label text="Score:" style="* {background-color: #808080; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px; }" id="10"/&gt;
        &lt;label text="0" style="* {background-color: #FFF; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px;}" id="30"/&gt;
     
        &lt;/ui&gt;
    ]]
    ui = simUI.create(xml)
    simUI.setPosition(ui, 0,0, true)
    bubbleRob = sim.getObject('/bubbleRob')
    ball = sim.getObject('/ball')
    bubbleRob2 = sim.getObject('/bubbleRob2')
    initialPosition = sim.getObjectPosition(bubbleRob, -1)
    initialOrientation = sim.getObjectOrientation(bubbleRob, -1)
    initialPosition2 = sim.getObjectPosition(bubbleRob2, -1)
    initialOrientation2 = sim.getObjectOrientation(bubbleRob2, -1)
    initialballPosition = sim.getObjectPosition(ball, -1)
    initialballOrientation = sim.getObjectOrientation(ball, -1)

end


function sysCall_actuation()
    --simUI.setLabelText(ui, 30, tostring(sim.getFloatSignal("myVariable")))
    result=sim.readProximitySensor(sensor)
    if(score1&lt;5)then
        if(result&gt;0)then
            score2 = score1+1
            simUI.setLabelText(ui, 30, tostring(score2))

            sim.setObjectPosition(bubbleRob, -1, initialPosition)
            sim.setObjectOrientation(bubbleRob, -1, initialOrientation)
            sim.setObjectPosition(bubbleRob2, -1, initialPosition2)
            sim.setObjectOrientation(bubbleRob2, -1, initialOrientation2)
            sim.setObjectPosition(ball, -1, initialballPosition)
            sim.setObjectOrientation(ball, -1, initialballOrientation)
            score1=score2
        end
    else
        sim.pauseSimulation()
    end
end</pre>
<p></p>
<p>4.改成用遠端api操控bubbleRob前後左右移動(<a href="/downloads/ag2_downloads/bubbleRob.7z">bubbleRob.7z</a>)</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/R4sNWGZLYoA" title="YouTube video player" width="560"></iframe></p>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
<h2>ag4</h2>
<p><span>2a-pj1ag4組員:41023125、41023128</span></p>
<p>pj1ag4倉儲:<a href="https://github.com/mdecd2023/2a-pj1ag4">https://github.com/mdecd2023/2a-pj1ag4</a></p>
<p>pj1ag4網頁:<a href="https://mdecd2023.github.io/2a-pj1ag4">https://mdecd2023.github.io/2a-pj1ag4</a></p>
<p><a href="/downloads/ag4/2a-pj1ag14 分組報告.pdf">2a-pj1ag14 分組報告pdf</a></p>
<p></p>
<p><span style="background-color: #ff0000;">歷程</span></p>
<p>3/24 完成將bubbleRob 雙輪車調整成手動模式</p>
<p>利用awsd鍵進行移動</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/T_q7Wp_GK6A" title="YouTube video player" width="560"></iframe></p>
<p><img caption="false" height="365" src="/images/lua move.png" width="560"/></p>
<p>觸發特定條件使<span>bubbleRob 雙輪車</span>回到原位</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/14i_4W1tOGk" title="YouTube video player" width="560"></iframe></p>
<p>3/25 完成足球製作以及<span>觸發條件設定製作</span></p>
<p>使球觸碰到球門的感測器後重製球場</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/pgLG2eIy6lo" title="YouTube video player" width="560"></iframe><span></span></p>
<p>紀錄初始位置</p>
<p><img alt="" height="101" src="/images/紀錄初始位置.png" width="892"/></p>
<p>重製位置</p>
<p><img alt="" src="/images/重製位置.mp4"/><img caption="false" height="94" src="/images/重製位置.png" width="876"/></p>
<p>3/26 增加放開鍵盤會停止、倒數計時、記分板</p>
<p>增加放開鍵盤一段時間後會將速度設為0直到按下鍵盤</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/oGEXV054pAk" title="YouTube video player" width="560"></iframe></p>
<p><img alt="" src="/images/index.html"/>增加倒數計時與分數的面板</p>
<p>開始後開始倒數計時</p>
<p>時間到則結束</p>
<p><img caption="false" height="293" src="/images/326.png" width="554"/></p>
<p>兩邊感測與計算皆完成</p>
<p><img alt="" height="293" src="/images/326-2.png" width="560"/></p>
<p><span>記分板與計時程式</span></p>
<p><span><img caption="false" height="168" src="/images/記分板與計時程式.png" width="560"/></span></p>
<p><span></span>3/29 連線問題解決</p>
<p>將操作的程式轉成python</p>
<p>4/12 確認連機遊玩可執行</p>
<p>加入歡迎跟恭喜</p>
<p><img caption="false" height="298" src="/images/412-1.png" width="560"/></p>
<p></p>
<p><img caption="false" height="296" src="/images/412-2.png" width="560"/></p>
<p>共經歷了八個版本改版</p>
<p>前七個版本:<a href="/downloads/ag4/bubbleRob紀錄.7z">bubbleRob紀錄.7z</a></p>
<p>最終版:<a href="/downloads/ag4/bubbleRob.7z">bubbleRob.7z</a></p>
<p>裡面包含了my_ip.txt ip.bat  ip.py bubbleRob2.py bubbleRob.py bubbleRob_scenes.ttt等</p>
<p>點擊<span>ip.bat就能直接獲取到目前電腦的ipv4位置</span></p>
<p><span><img caption="false" height="147" src="/images/ip.png" width="734"/></span></p>
<p><span></span></p>
<p> 加入遊戲所在電腦ip 只需輸入ip (<span>遊戲所在電腦ip</span>)</p>
<p><img caption="false" height="151" src="/images/gameip.png" width="859"/></p>
<p></p>
<p><span style="background-color: #ff0000;">程式</span></p>
<p>場景部分將程式將拆成了許多部分</p>
<p>用以方便維修</p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
-- 場景模擬開始時開啟19998與23020埠號
simRemoteApi.start(19998)
simRemoteApi.start(23020)
end</pre>
<p></p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    --紀錄初始位置並在得分時重置位置
    --倒數計時與計算分數並顯示等
    sensor = sim.getObject('./sensor')
    sensor2 = sim.getObject('./sensor2')
    bubbleRobBase = 197
    bubbleRobBase2 = 210
    ball = 206
    initialBubbleRobPosition = sim.getObjectPosition(bubbleRobBase, -1)
    initialBubbleRobOrientation = sim.getObjectOrientation(bubbleRobBase, -1)
    initialballPosition = sim.getObjectPosition(ball, -1)
    initialballOrientation = sim.getObjectOrientation(ball, -1)
    initial2Position = sim.getObjectPosition(bubbleRobBase2, -1)
    initial2Orientation = sim.getObjectOrientation(bubbleRobBase2, -1)
    -- do some initialization here
    count = 1800  -- ??30????????????
    score1 = 0  -- ??????
    score2 = 0
    xml = [[
        &lt;ui closeable="false" resizeable="false" activate="false"&gt;
            &lt;label text="30:00" style="* {background-color: #F00; color: #FFF; font-size: 32px; font-weight: bold; padding: 4px; border-radius: 4px;}" id="10"/&gt;
            &lt;label text="0" style="* {background-color: #00F; color: #FFF; font-size: 32px; font-weight: bold; padding: 4px; border-radius: 4px;}" id="20"/&gt;
            &lt;label text="0" style="* {background-color: #00F; color: #FFF; font-size: 32px; font-weight: bold; padding: 4px; border-radius: 4px;}" id="30"/&gt;
        &lt;/ui&gt;
    ]]
    ui = simUI.create(xml)
    simUI.setPosition(ui, 0,0, true)
end

function sysCall_actuation()
    result=sim.readProximitySensor(sensor)
    result2=sim.readProximitySensor(sensor2)
    --if sim.getSimulationTime() == 0 then
        --sim.pauseSimulation()
    --end

    -- 0 or 1
    if(result&gt;0)then
        sim.pauseSimulation()
        sim.setObjectPosition(bubbleRobBase, -1, initialBubbleRobPosition)
        sim.setObjectOrientation(bubbleRobBase, -1, initialBubbleRobOrientation)
        sim.setObjectPosition(ball, -1, initialballPosition)
        sim.setObjectOrientation(ball, -1, initialballOrientation)
        sim.setObjectPosition(bubbleRobBase2, -1, initial2Position)
        sim.setObjectOrientation(bubbleRobBase2, -1, initial2Orientation)
        score1 = score1 +1 
        
    end
    if(result2&gt;0)then
        sim.pauseSimulation()
        sim.setObjectPosition(bubbleRobBase, -1, initialBubbleRobPosition)
        sim.setObjectOrientation(bubbleRobBase, -1, initialBubbleRobOrientation)
        sim.setObjectPosition(ball, -1, initialballPosition)
        sim.setObjectOrientation(ball, -1, initialballOrientation)
        sim.setObjectPosition(bubbleRobBase2, -1, initial2Position)
        sim.setObjectOrientation(bubbleRobBase2, -1, initial2Orientation)
        score2 = score2 +1 
        
    end
    if count &gt; 0 then
        count = count - 1
        local minutes = math.floor(count / 60)
        local seconds = count % 60
        local timeStr = string.format("%d:%02d", minutes, seconds)
        simUI.setLabelText(ui, 10, timeStr)
        simUI.setLabelText(ui, 20, tostring(score1))
        simUI.setLabelText(ui, 30, tostring(score2))
    else
        sim.stopSimulation()
    end

end
</pre>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    --開始時暫停模擬並顯示welcome to play
    --之後顯示congratulations on getting a point
    xml1 = [[
        &lt;ui closeable="false" resizeable="false" activate="false"&gt;
            &lt;label text="welcome to play" style="* {background-color: #00F; color: #FFF; font-size: 32px; font-weight: bold; padding: 4px; border-radius: 4px;}" id="1"/&gt;
        &lt;/ui&gt;
    ]]
    ui1 = simUI.create(xml1)
    add = true 
    -- Pause simulation on the first run
    sim.pauseSimulation(true)
end

function sysCall_actuation()
    simUI.hide(ui1)
    
    
    
end

function sysCall_suspend()
    simUI.show(ui1)
    --simUI.setLabelText(ui1, 1, "good game")
    if add == false then 
        simUI.setLabelText(ui1, 1, "congratulations on getting a point")
    end
    add = false
end
</pre>
<p>python操控部分<br/><br/></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">#bubbleRob.py
import sim
import sys, math
import keyboard
import time

with open('my_ip.txt', 'r') as f:
    my_ip1 = f.readlines()
    for line in my_ip1:
        if 'game' in line: #game #myip #local
            ip = line.split(':')[1].strip()
            print(ip)

# 連接到 CoppeliaSim simulation
sim.simxFinish(-1)
clientID = sim.simxStart(ip, 19997, True, True, 5000, 5)
sim.simxStartSimulation(clientID, sim.simx_opmode_oneshot_wait)

if clientID != -1:
    print("已連線到遠端 CoppeliaSim 伺服器")
else:
    print('連線失敗')
    sys.exit('無法連線到 CoppeliaSim 伺服器')

# 取得馬達與感測器的 handles
errorCode, leftMotor = sim.simxGetObjectHandle(clientID, 'leftMotor', sim.simx_opmode_oneshot_wait)
errorCode, rightMotor = sim.simxGetObjectHandle(clientID, 'rightMotor', sim.simx_opmode_oneshot_wait)
errorCode, sensingNose = sim.simxGetObjectHandle(clientID, 'sensingNose', sim.simx_opmode_oneshot_wait)

# 設定一些參數
deg = math.pi/180
paused = False
if errorCode == -1:
    print('找不到左右馬達')
    sys.exit()

def jointspeed(left,right):
    errorCode4=sim.simxSetJointTargetVelocity(clientID,leftMotor,left, sim.simx_opmode_oneshot)
    errorCode5=sim.simxSetJointTargetVelocity(clientID,rightMotor,right, sim.simx_opmode_oneshot_wait)
errorCode, number2 = sim.simxLoadModel(clientID, 'number2.ttm', 0, sim.simx_opmode_oneshot_wait)   
while sim.simxGetConnectionId(clientID) != -1:
    event = keyboard.read_event()
    if event.event_type == 'down':
        print('The "' + event.name + '" key was pressed.')
    if event.name == 'a' :
        jointspeed(-3,5)
    elif event.name == 'w' :
        jointspeed(5,5)
    elif event.name == 's' :
        jointspeed(-5,-5)
    elif event.name == 'd' :
        jointspeed(5,-3)
    if event.name == 'p':
        if not paused:
            print('Paused')
            sim.simxPauseSimulation(clientID, sim.simx_opmode_oneshot_wait)
            paused = True
            time.sleep(0.1)
        else:
            print('Resumed')
            sim.simxStartSimulation(clientID, sim.simx_opmode_oneshot_wait)
            paused = False
            time.sleep(0.1)
</pre>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">#bubbleRob2.py
import sim
import sys, math
import keyboard
import time

with open('my_ip.txt', 'r') as f:
    my_ip1 = f.readlines()
    for line in my_ip1:
        if 'game' in line: #game #myip #local
            ip = line.split(':')[1].strip()
            print(ip)


# 連接到 CoppeliaSim simulation
sim.simxFinish(-1)
clientID = sim.simxStart(ip, 19998, True, True, 5000, 5)
sim.simxStartSimulation(clientID, sim.simx_opmode_oneshot_wait)

if clientID != -1:
    print("已連線到遠端 CoppeliaSim 伺服器")
else:
    print('連線失敗')
    sys.exit('無法連線到 CoppeliaSim 伺服器')

# 取得馬達與感測器的 handles
errorCode, sensingNose = sim.simxGetObjectHandle(clientID, 'sensingNose', sim.simx_opmode_oneshot_wait)
errorCode = 0
leftMotor = 216
rightMotor = 214
print(errorCode)
# 設定一些參數
deg = math.pi/180
paused = False
if errorCode == -1:
    print('找不到左右馬達')
    sys.exit()

def jointspeed(left,right):
    errorCode4=sim.simxSetJointTargetVelocity(clientID,leftMotor,left, sim.simx_opmode_oneshot)
    errorCode5=sim.simxSetJointTargetVelocity(clientID,rightMotor,right, sim.simx_opmode_oneshot_wait)
errorCode, number2 = sim.simxLoadModel(clientID, 'number2.ttm', 0, sim.simx_opmode_oneshot_wait)   
while sim.simxGetConnectionId(clientID) != -1:
    event = keyboard.read_event()
    if event.event_type == 'down':
        print('The "' + event.name + '" key was pressed.')
    if event.name == 'a' :
        jointspeed(-3,5)
    elif event.name == 'w' :
        jointspeed(5,5)
    elif event.name == 's' :
        jointspeed(-5,-5)
    elif event.name == 'd' :
        jointspeed(5,-3)
    if event.name == 'p':
        if not paused:
            print('Paused')
            sim.simxPauseSimulation(clientID, sim.simx_opmode_oneshot_wait)
            paused = True
            time.sleep(0.1)
        else:
            print('Resumed')
            sim.simxStartSimulation(clientID, sim.simx_opmode_oneshot_wait)
            paused = False
            time.sleep(0.1)

</pre>
<p></p>
<p><span style="background-color: #ff0000;">遊戲說明</span></p>
<p>開啟場景後便可以使用19997進行連線</p>
<p>如果成功連線便會顯示</p>
<p><img caption="false" height="297" src="/images/412-1.png" width="560"/></p>
<p>這時23020與19998埠號便會開啟</p>
<p>第二位玩家便可利用19998加入遊戲</p>
<p>加入成功便會立即開始</p>
<p>玩家可利用wasd進行操控</p>
<p>觀戰者可以利用23020埠號進行觀戰</p>
<p>一方得分後便會暫停遊戲並還原場地</p>
<p>按下p則繼續遊戲</p>
<p>時間到便會結束遊戲</p>
<p>歡迎與恭喜lua程式</p>
<p><img caption="false" height="296" src="/images/歡迎與恭喜lua.png" width="560"/></p>
<p></p>
<p><span style="background-color: #ff0000;">缺陷</span></p>
<p>1.在23020埠號的觀戰者無法查看到分數與時間,只能顯示在場景的主畫面上</p>
<p>2.機器人的機體不適合推球</p>
<p>3.遊戲結束後可以加入哪方勝利字樣</p>
<p>4.計分可以拆分成兩方並標示(藍方紅方等)以便了解比分情況</p>
<p>5.翻車時目前沒有自救空間</p>
<p>可以增加按鍵來達成加機器擺正</p>
<p>6.按鍵指令只能觸發一個</p>
<p>造成動作不夠連貫</p>
<p>希望能做到同時按兩個鍵</p>
<p>將會有更高的操作性</p>
<p><span style="background-color: #ff0000;">補充</span></p>
<p>sensingNose其實沒有實際用處</p>
<p>不拔除主要原因是可以用來凸顯bubbleRob的移動方向</p>
<p><span style="background-color: #ff0000;">心得</span></p>
<p>這次的專案從中學習到了CoppeliaSim的remoteApi實際運作方式</p>
<p>也對CoppeliaSim的lua與python的寫法有更深得了解</p>
<p>對於CoppeliaSim的句柄用法了解透徹能夠靈活運用</p>
<p>不過對於sim.py函式庫的使用依舊有加強空間</p>
<p>許多函式不熟悉只能使用替代方案執行</p>
<p>編寫程式時可以多利用print</p>
<p>不管是除錯或者理解暫存的內容都好用</p>
<p>lua的寫法與習慣的pyhton略有不同</p>
<p>例如</p>
<p>--lua註解</p>
<p>#python註解</p>
<p>lua程式後面需要加上end表示結束</p>
<p>但不需要像python重視縮排</p>
<p>-- lua 的if</p>
<p>if *條件* then *輸出* elseif *條件2* then *輸出2* else *輸出3* end</p>
<p>python不需要then 且elif跟lua的elseif寫法不同需要注意</p>
<p>-- lua 的whilefunction sysCall_actuation()</p>
<p>*程式*</p>
<p>end</p>
<p>跟python的while True:類似無限循環執行到結束</p><h2>ag5</h2>
<p>組長: 41023121 李承翰 ， 組員：41023134 林建維</p>
<p>網頁<span> </span><a href="https://mdecd2023.github.io/2a-pj1ag5/content/index.html">https://mdecd2023.github.io/2a-pj1ag5/content/index.html</a></p>
<p>倉儲<span> </span><a href="https://github.com/mdecd2023/2a-pj1ag5">https://github.com/mdecd2023/2a-pj1ag5</a></p>
<p><span>bubbleRob足球遊戲</span></p>
<p><span></span></p>
<p><a href="/downloads/ag5/球框.stl">球框.stl </a> <a href="/downloads/ag5/球框.prt">球框.prt</a></p>
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/cmsimde/static" data-varname="winkVideoData1" height="630" muted="true" width="1008">
<source src="./../downloads/ag5/球框/1.mp4" type="video/mp4"/></video></div>
<p><img alt="" height="573" src="/images/球框.png" width="986"/></p>
<p><a href="/downloads/ag5/兩台車車加球框.ttt">兩台車車加球框.ttt</a></p>
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/cmsimde/static" data-varname="winkVideoData1" height="630" muted="true" width="1008">
<source src="./../downloads/ag5/兩車車加球框/1.mp4" type="video/mp4"/></video></div>
<p><a href="/downloads/ag5/計分.ttt">計分.ttt</a></p>
<p><img alt="" height="572" src="/images/計分.png" width="1016"/></p>
<p><a href="/downloads/ag5/sensor.txt">sensor.txt</a> <a href="/downloads/ag5/sensor2.txt">sensor2.txt</a> <a href="/downloads/ag5/newbing_bubbleRob.rar">newbing_bubbleRob.rar</a></p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/zCCj7oN0XuA" title="YouTube video player" width="560"></iframe></p>
<p>兩台車車對戰影片</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/yxFX1Op0uQA" title="YouTube video player" width="560"></iframe></p>
<p>這學期的課程節奏十分緊湊，我也花了許多的時間在了解程式及原理，雖然現在有AI的協助但是AI必須問得非常精準才能得到我想要的答案，像是程式出錯時的回應他能很精準地回答，但是如果是問他程式的問題時他有時會列出很多種可能，看到其實心很累啊。這次的車車老實說大部分還是由老師所提供也謝謝同學的教導與修正我才能如期完成這項作業。</p>
<h2>ag6</h2>
<p>組員：呂佳柔41023104 王啟騰41023112</p>
<p>pj1ag6網站 <a href="https://mdecd2023.github.io/2a-pj1ag6/content/index.html">https://mdecd2023.github.io/2a-pj1ag6/content/index.html</a> </p>
<p>pj1ag6倉儲 <a href="https://github.com/mdecd2023/2a-pj1ag6">https://github.com/mdecd2023/2a-pj1ag6</a> </p>
<p>BubbleRob</p>
<p>1.在 Tutorial1 中以 CoppeliaSim 建立 bubbleRob 機器人，添加關節給予馬力、<span>利用近接感測器偵測障礙物並透過 Lua script 控制 bubbleRob 雙輪車的移動。</span></p>
<p><span>2.</span>繪製球場</p>
<script>
var winkVideoData_40923151 = {
  dataVersion: 1,
  frameRate: 10,
  buttonFrameLength: 5,
  buttonFrameOffset: 2,
  frameStops: {
  },
};
</script>
<!-- 接下來將 mp4 檔案從 downloads 目錄取出 -->
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/static" data-varname="winkVideoData_40923151" height="630" muted="true" width="1008">
<source src="./../downloads/ag6/球場繪製.mp4" type="video/mp4"/></video></div>
<div class="winkVideoContainerClass"><a href="/downloads/ag6/球場.SLDPRT">球場.SLDPRT</a>  <a href="/downloads/ag6/球場.STL">球場.STL</a></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass">3.加入感測器</div>
<script>
var winkVideoData_40923152 = {
  dataVersion: 1,
  frameRate: 10,
  buttonFrameLength: 5,
  buttonFrameOffset: 2,
  frameStops: {
  },
};
</script>
<!-- 接下來將 mp4 檔案從 downloads 目錄取出 -->
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/static" data-varname="winkVideoData_40923152" height="630" muted="true" width="1008">
<source src="./../downloads/ag6/加入感測器.mp4" type="video/mp4"/></video></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass">4.加入bubbleRob和球</div>
<div class="winkVideoContainerClass"></div>
<script>
var winkVideoData_40923153 = {
  dataVersion: 1,
  frameRate: 10,
  buttonFrameLength: 5,
  buttonFrameOffset: 2,
  frameStops: {
  },
};
</script>
<!-- 接下來將 mp4 檔案從 downloads 目錄取出 -->
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/static" data-varname="winkVideoData_40923153" height="630" muted="true" width="1008">
<source src="./../downloads/ag6/add bubbleRob and ball.mp4" type="video/mp4"/></video></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass">5.加入程式碼</div>
<div class="winkVideoContainerClass"></div>
<script>
var winkVideoData_40923155 = {
  dataVersion: 1,
  frameRate: 10,
  buttonFrameLength: 5,
  buttonFrameOffset: 2,
  frameStops: {
  },
};
</script>
<!-- 接下來將 mp4 檔案從 downloads 目錄取出 -->
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/static" data-varname="winkVideoData_40923155" height="630" muted="true" width="1008">
<source src="./../downloads/ag6/導入程式碼.mp4"/></video></div>
<div class="winkVideoContainerClass"><a href="/downloads/ag6/完整.ttt">Football.ttt</a>   <a href="/downloads/ag6/bubbleRob_zmq_examples.rar">bubbleRob.rar</a>  <a href="/downloads/ag6/sensor.txt">sensor.txt</a>  <a href="/downloads/ag6/sensor2.txt">sensor2.txt</a></div>
<div class="winkVideoContainerClass"></div>
<div class="winkVideoContainerClass"></div>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/0FSaMjbxHxo" title="YouTube video player" width="560"></iframe></p><h2>ag10</h2>
<p>3/30 已完成場地及感測器</p>
<p><img alt="" height="405" src="/downloads/ag10/20230330.png" width="720"/></p>
<p>4/14 完成記分板程式</p>
<p><img alt="" height="405" src="/downloads/ag10/20230414.png" width="720"/></p>
<p>4/14 可進行計分</p>
<p>觸碰到感測器球及機器人會重置到原本的位置</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/QrEx-9oWQ-c" title="YouTube video player" width="560"></iframe></p>
<p>在錄影時記分板不會顯示出來-附上圖片</p>
<p><img alt="" height="405" src="/downloads/ag10/20230414-1.png" width="720"/></p>
<p>當分數為5分時，會暫停模擬</p>
<p><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/fWbkG7gVaFw" title="YouTube video player" width="560"></iframe></p>
<p>在製作感測器時求記得把 collidable、measurable、detectable 這三個選項打開</p>
<p><img alt="" height="405" src="/downloads/ag10/20230414-2.png" width="720"/></p>
<p>另外要注意的是感測器 z軸的部分不能為0，否則感測器會直接偵測到地板導致程式暫停模擬</p>
<p>可以將倒數計時器顯示出來，但計時器所減少的時間會比正常時間快好幾倍</p>
<p><img alt="" height="405" src="/downloads/ag10/20230414-3.png" width="720"/></p>
<p>bubbleRob_football 檔案 : <a href="/downloads/ag10/newbing_bubbleRob_football.ttt">bubbleRob_football_pj1ag10</a></p>
<p>記分板程式註解</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    score1 = 0 -- 初始化一個名為score1的變數，值為0
    
    sensor = sim.getObject('./sensor') -- 從模擬場景中獲取一個名為sensor的物體
    
    -- 創建一個UI，包括標題、計分標籤和當前分數值標籤，使用plastique風格
    xml = [[
        &lt;ui title="Scoreboard" closeable="false" resizable="false" style="plastique"&gt;
        &lt;label text="Score:" style="* {background-color: #808080; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px; }" id="10"/&gt;
        &lt;label text="0" style="* {background-color: #FFF; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px;}" id="30"/&gt;
     
        &lt;/ui&gt;
    ]]
    ui = simUI.create(xml) -- 創建UI
    simUI.setPosition(ui, 0,0, true) -- 將UI定位在屏幕左上角
    bubbleRob = sim.getObject('/bubbleRob') -- 從模擬場景中獲取名為bubbleRob的物體句柄
    ball = sim.getObject('/ball') -- 從模擬場景中獲取名為ball的物體句柄
    bubbleRob2 = sim.getObject('/bubbleRob2') -- 從模擬場景中獲取名為bubbleRob2的物體句柄
    initialPosition = sim.getObjectPosition(bubbleRob, -1) -- 獲取bubbleRob物體的初始位置
    initialOrientation = sim.getObjectOrientation(bubbleRob, -1) -- 獲取bubbleRob物體的初始方向
    initialPosition2 = sim.getObjectPosition(bubbleRob2, -1) -- 獲取bubbleRob2物體的初始位置
    initialOrientation2 = sim.getObjectOrientation(bubbleRob2, -1) -- 獲取bubbleRob2物體的初始方向
    initialballPosition = sim.getObjectPosition(ball, -1) -- 獲取ball物體的初始位置
    initialballOrientation = sim.getObjectOrientation(ball, -1) -- 獲取ball物體的初始方向

end

function sysCall_actuation()
    --simUI.setLabelText(ui, 30, tostring(sim.getFloatSignal("myVariable")))

    -- 讀取接近傳感器的距離值，將其存儲在result變數中
    result=sim.readProximitySensor(sensor)

    -- 如果分數小於5，則執行以下操作
    if(score1&lt;5)then

        -- 如果檢測到接近物體，則執行以下操作
        if(result&gt;0)then
            -- 將score1變數增加1
            score2 = score1+1

            -- 在UI中更新分數值標籤的文本為score2
            simUI.setLabelText(ui, 30, tostring(score2))

            -- 重置bubbleRob、bubbleRob2和ball物體的位置和方向
            sim.setObjectPosition(bubbleRob, -1, initialPosition)
            sim.setObjectOrientation(bubbleRob, -1, initialOrientation)
            sim.setObjectPosition(bubbleRob2, -1, initialPosition2)
            sim.setObjectOrientation(bubbleRob2, -1, initialOrientation2)
            sim.setObjectPosition(ball, -1, initialballPosition)
            sim.setObjectOrientation(ball, -1, initialballOrientation)

            -- 將score1設置為score2
            score1=score2
        end
    else
        -- 如果分數達到5，則暫停模擬
        sim.pauseSimulation()
    end
end</pre>
<p>倒數計時器程式註解</p>
<pre class="brush:html;auto-links:false;toolbar:false" contenteditable="false">-- 初始化函數，初始化得分(score1)為0和計時器(count)為3600
function sysCall_init()
    -- initialize the score to 0
    score1 = 0 -- 初始化得分
    count = 3600 -- 初始化計時器
    -- 獲取接近傳感器對象並創建UI界面
    sensor = sim.getObject('./sensor')
    xml = [[
            &lt;ui title="Scoreboard" closeable="false" resizable="false" style="plastique"&gt;
              &lt;label text="60:00.0" style="* {background-color: #F00; color: #FFF; font-size: 32px; font-weight: bold; padding: 4px; border-radius: 4px;}" id="10"/&gt;
              &lt;label text="Score:" style="* {background-color: #808080; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px; }" id="20"/&gt;
              &lt;label text="0" style="* {background-color: #FFF; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px;}" id="30"/&gt;
            &lt;/ui&gt;
          ]]
    ui = simUI.create(xml)
    simUI.setPosition(ui, 0, 0, true)
    -- 獲取對象及其初始位置/方向
    bubbleRob = sim.getObject('/bubbleRob')
    ball = sim.getObject('/ball')
    initialPosition = sim.getObjectPosition(bubbleRob, -1)
    initialOrientation = sim.getObjectOrientation(bubbleRob, -1)
    initialballPosition = sim.getObjectPosition(ball, -1)
    initialballOrientation = sim.getObjectOrientation(ball, -1)
    
end

function sysCall_actuation() -- 讀取接近傳感器值
    result=sim.readProximitySensor(sensor)
    -- 檢查得分是否小於5
    if(score1&lt;5)then
        -- 檢查接近傳感器是否檢測到某物
        if(result&gt;0)then
            -- 增加得分並更新UI標籤
            score2 = score1+1
            simUI.setLabelText(ui, 30, tostring(score2))
            -- 重置對象的位置和方向
            sim.setObjectPosition(bubbleRob, -1, initialPosition)
            sim.setObjectOrientation(bubbleRob, -1, initialOrientation)
            sim.setObjectPosition(ball, -1, initialballPosition)
            sim.setObjectOrientation(ball, -1, initialballOrientation)
            -- 更新得分變量
            score1=score2
        end
    end
    if count &gt; 0 then -- 檢查計時器是否大於0
          count = count - 1 -- 減少倒數時間
          local minutes = math.floor(count / 60) -- 計算分鐘
          local seconds = count % 60 -- 計算秒數
          local timeStr = string.format("%d:%02d", minutes , seconds) -- 格式化時間字符串
          simUI.setLabelText(ui, 10, timeStr) -- 更新時間UI標籤
          simUI.setLabelText(ui, 30, tostring(score1)) -- 更新score的UI標籤
    else
        -- 如果時間到會暫停模擬
        sim.pauseSimulation()
    end
end</pre>
<p>製作心得：</p>
<p>製作bubbleRobTutorial時遇到不少問題，如:軸在裝配時選轉方向設置顛倒，導致bubbleRobTutorial 模擬後變成倒著跑，也有遇到只會在原地轉的，還有名稱大小寫打錯導致程式無法運行，但後來都有順利解決。因為參考資料是英文，所以在製作過程中遇到英文單字看不懂或無法理解他的意思，需要上網參考資料才能理解。在製作記分板時詢問了同學才知道他是利用xml創建UI界面將計分板顯示出來，並且利用了Lua函數中的回調函數，該函數中，可以讀取和設置模型的狀態，而計時器也是一樣利用UI界面，並且在回函樹中設置時間到會停止模擬，也學習到了CoppeliaSim的remoteApi實際運作的流程。</p>
<p></p>
<p></p><h2>ag12</h2>
<p><span>2a-pj1ag2組員:41023114 王樟皓 41023126 卓桓琮</span></p>
<p>github倉儲 :<span><span> </span><a href="https://github.com/mdecad2022/site-41023126.git">https://github.com/mdecad2022/site-41023126.git</a></span></p>
<p>個人網站 :<a href="https://mdecad2022.github.io/site-41023126/content/index.html">https://mdecad2022.github.io/site-41023126/content/index.html</a></p>
<p><strong>Process </strong></p>
<p><span><strong>Step1</strong>:建立足球場景，透過onshape繪出足球的場景，足球分成兩部分第一部分為足球的牆壁第二部分為球門。足球的牆壁:</span><a href="https://cad.onshape.com/documents/1ef9bb78edd5251adafdfbeb/w/0699139f42c9ebc4817c6156/e/20413e231639dd10dc11bb42?renderMode=0&amp;uiState=643a420fb4776c6d78624f23">wall</a><span> 球門:</span><a href="https://cad.onshape.com/documents/a377cc4e5b1ef7cab53572bc/w/239bf2d6c24d9f9c80b7a628/e/20ebee5effb2f8812f5d7e8a?renderMode=0&amp;uiState=643a427646ce454f67f78abb">door</a></p>
<p><span><strong>Step2</strong>:轉成STL檔匯入coppaliasim場景中，放入先前製作的bobbleRob robot，並複製兩個在場景中，加入球體 過程:<a href="https://youtu.be/Rc-BSnYI17w">https://youtu.be/Rc-BSnYI17w</a></span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/Rc-BSnYI17w" width="560"></iframe></span></p>
<p><span><strong>Step3</strong>:設定coppliasim中的參數</span></p>
<p><span>1.在兩個球門上加入感應sensor，以感測是否進球，將兩個seonsor拉到球門底下</span></p>
<p><span><img alt="" height="313" src="/images/pj1-note1.png" width="556"/></span></p>
<p><span>2.設定ball的參數</span></p>
<script>
var winkVideoData_41023126 = {
  dataVersion: 1,
  frameRate: 10,
  buttonFrameLength: 5,
  buttonFrameOffset: 2,
  frameStops: {
  },
};
</script>
<!-- 接下來將 mp4 檔案從 downloads 目錄取出 -->
<div class="winkVideoContainerClass"><video autoplay="autoplay" class="winkVideoClass" controls="controls" data-dirname="/static" data-varname="winkVideoData_41023126" height="630" muted="true" width="1008">
<source src="./../downloads/ag12/pj1-ball.mp4" type="video/mp4"/></video></div>
<p><span></span>3.bubbleRob robot 參數設定:<a href="https://mdecd2023.github.io/2a-pj1ag12/content/%E8%A3%BD%E4%BD%9C%E9%81%8E%E7%A8%8B.html">bubbleRob</a></p>
<p><span><strong>Step4</strong>:加入sensor程式碼-利用chatgpt 寫出程式碼-計時器(記分板-參考至ag2)</span></p>
<p><span>文字檔:<a href="/downloads/ag12/sensor-program.txt">sensor-program</a></span></p>
<p><span><img alt="" height="393" src="/images/pj1-note4.png" width="469"/></span></p>
<p><span><img alt="" height="450" src="/images/pj1-note5.png" width="482"/></span></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    score1 = 0
    remaining_time = 60 -- 1 minute
    sensor = sim.getObject('./sensor')
    xml = [[        <ui closeable="false" resizable="false" title="Scoreboard">            <label id="10" style="* {background-color: #808080; color: #000000; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px;" text="Score:"></label>            <label id="30" style="* {background-color: #1E90FF; color: #ffffff; font-size: 40px; font-weight: bold; padding: 5px; border-radius: 5px;" text="0"></label>            <label id="40" style="* {background-color: #808080; color: #000000; font-size: 20px; font-weight: bold; padding: 5px; border-radius: 5px;" text="Time left: 60s"></label>        </ui>    ]]
    ui = simUI.create(xml)
    simUI.setPosition(ui, 0,0, true)
    bubbleRob1 = sim.getObject('/bubbleRob1')
    ball = sim.getObject('/ball')
    bubbleRob2 = sim.getObject('/bubbleRob2')
    initialPosition = sim.getObjectPosition(bubbleRob1, -1)
    initialOrientation = sim.getObjectOrientation(bubbleRob1, -1)
    initialPosition2 = sim.getObjectPosition(bubbleRob2, -1)
    initialOrientation2 = sim.getObjectOrientation(bubbleRob2, -1)
    initialballPosition = sim.getObjectPosition(ball, -1)
    initialballOrientation = sim.getObjectOrientation(ball, -1)
end

function sysCall_actuation()
    -- read the proximity sensor value
    result=sim.readProximitySensor(sensor)
    -- check if the remaining time is greater than 0
    if(remaining_time &gt; 0) then
        -- check if the proximity sensor detects something
        if(result&gt;0) then
            -- increase the score and update the UI label
            score2 = score1+1
            simUI.setLabelText(ui, 30, tostring(score2))
            -- reset the objects' positions and orientations
            sim.setObjectPosition(bubbleRob1, -1, initialPosition)
            sim.setObjectOrientation(bubbleRob1, -1, initialOrientation)
            sim.setObjectPosition(bubbleRob2, -1, initialPosition2)
            sim.setObjectOrientation(bubbleRob2, -1, initialOrientation2)
            sim.setObjectPosition(ball, -1, initialballPosition)
            sim.setObjectOrientation(ball, -1, initialballOrientation)
            -- update the score variable
            score1=score2
        end
        -- update the remaining time and the UI label
        remaining_time = remaining_time - sim.getSimulationTimeStep()
        simUI.setLabelText(ui, 40, "Time left: "..math.floor(remaining_time).."s")
    else
        sim.stopSimulation()
    end
end</pre>
<p><span><strong>Step5</strong>:打開小白窗 加入程式碼 按go</span></p>
<p><span>文字檔:<a href="/downloads/ag12/senser1-whiteboard-program.txt">whitewindow</a></span></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false"># pip install pyzmq cbor
from zmqRemoteApi import RemoteAPIClient
import keyboard

client = RemoteAPIClient('localhost', 23000)

print('Program started')
sim = client.getObject('sim')
sim.startSimulation()
print('Simulation started')

def setBubbleRobVelocity(leftWheelVelocity, rightWheelVelocity):
    leftMotor = sim.getObject('/leftMotor')
    rightMotor = sim.getObject('/rightMotor')
    sim.setJointTargetVelocity(leftMotor, leftWheelVelocity)
    sim.setJointTargetVelocity(rightMotor, rightWheelVelocity)

'''
# Example usage 1:
setBubbleRobVelocity(1.0, 1.0)
time.sleep(2)
setBubbleRobVelocity(0.0, 0.0)
'''
# use keyborad to move BubbleRob

while True:
    if keyboard.is_pressed('up'):
        setBubbleRobVelocity(1.0, 1.0)
    elif keyboard.is_pressed('down'):
        setBubbleRobVelocity(-1.0, -1.0)
    elif keyboard.is_pressed('left'):
        setBubbleRobVelocity(-1.0, 1.0)
    elif keyboard.is_pressed('right'):
        setBubbleRobVelocity(1.0, -1.0)
    elif keyboard.is_pressed('q'):
        # stop simulation
        sim.stopSimulation()
    else:
        setBubbleRobVelocity(0.0, 0.0)</pre>
<p><strong>在football的場景加入計時器和記分板 過程:<a href="https://youtu.be/EZ_mE9P4j-s">https://youtu.be/EZ_mE9P4j-s</a></strong></p>
<p><img alt="" height="283" src="/images/pj1-note3.png" width="505"/></p>
<p><img alt="" height="267" src="/images/pj1-note2.png" width="508"/><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/Dnn487BBg2E" width="560"></iframe></p>
<p><strong>Step6</strong>:連線對戰</p>
<p>1.查詢ipconfig 找到ipv4埠號 </p>
<p><img alt="" height="343" src="/images/pj1-note6.png" width="544"/></p>
<p>2.將192.168.0.4 複製到小白窗的程式中</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false"># pip install pyzmq cbor
from zmqRemoteApi import RemoteAPIClient
import keyboard

client = RemoteAPIClient('192.168.0.4', 23000)

print('Program started')
sim = client.getObject('sim')
sim.startSimulation()
print('Simulation started')

def setBubbleRobVelocity(leftWheelVelocity, rightWheelVelocity):
    leftMotor = sim.getObject('/leftMotor')
    rightMotor = sim.getObject('/rightMotor')
    sim.setJointTargetVelocity(leftMotor, leftWheelVelocity)
    sim.setJointTargetVelocity(rightMotor, rightWheelVelocity)

'''
# Example usage 1:
setBubbleRobVelocity(1.0, 1.0)
time.sleep(2)
setBubbleRobVelocity(0.0, 0.0)
'''
# use keyborad to move BubbleRob

while True:
    if keyboard.is_pressed('up'):
        setBubbleRobVelocity(1.0, 1.0)
    elif keyboard.is_pressed('down'):
        setBubbleRobVelocity(-1.0, -1.0)
    elif keyboard.is_pressed('left'):
        setBubbleRobVelocity(-1.0, 1.0)
    elif keyboard.is_pressed('right'):
        setBubbleRobVelocity(1.0, -1.0)
    elif keyboard.is_pressed('q'):
        # stop simulation
        sim.stopSimulation()
    else:
        setBubbleRobVelocity(0.0, 0.0)</pre>
<p>3.開始兩人對戰</p>